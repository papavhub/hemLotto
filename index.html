<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Lotto Generator</title>

<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
}

body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:radial-gradient(circle at 20% 20%, #1e293b, #0f172a 70%);
  color:white;
  padding:20px;
}

.container{
  width:100%;
  max-width:420px;
  text-align:center;
}

h1{
  font-size:26px;
  margin-bottom:25px;
  font-weight:600;
}

/* ğŸ”¥ í† ê¸€ ì˜ì—­ (ê²¹ì¹¨ í•´ê²° êµ¬ì¡°) */
.mode-toggle{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:15px;
  margin-bottom:25px;
  font-size:14px;
}

.mode-label{
  width:60px;
  text-align:center;
  opacity:0.5;
  transition:0.2s;
}

.mode-label.active{
  opacity:1;
  font-weight:600;
}

.switch{
  position:relative;
  width:50px;
  height:26px;
  flex-shrink:0;
}

.switch input{
  display:none;
}

.slider{
  position:absolute;
  width:100%;
  height:100%;
  background:#475569;
  border-radius:50px;
  cursor:pointer;
  transition:0.3s;
}

.slider:before{
  content:"";
  position:absolute;
  height:20px;
  width:20px;
  left:3px;
  top:3px;
  background:white;
  border-radius:50%;
  transition:0.3s;
}

input:checked + .slider{
  background:#6366f1;
}

input:checked + .slider:before{
  transform:translateX(24px);
}

/* ìˆ«ì ì˜ì—­ */
.numbers{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:12px;
  margin-bottom:25px;
  min-height:60px;
}

.ball{
  width:60px;
  height:60px;
  border-radius:50%;
  display:flex;
  justify-content:center;
  align-items:center;
  font-weight:600;
  font-size:18px;
  color:white;
  box-shadow:0 6px 18px rgba(0,0,0,0.4);
  transition:transform 0.2s;
}

.yellow{background:#f59e0b;}
.blue{background:#3b82f6;}
.red{background:#ef4444;}
.gray{background:#64748b;}
.green{background:#22c55e;}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#6366f1,#8b5cf6);
  color:white;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  margin-top:10px;
}

button:disabled{
  opacity:0.5;
  cursor:not-allowed;
}

.share-row{
  display:flex;
  gap:8px;
  margin-top:10px;
}

.share-row button{
  flex:1;
  font-size:13px;
  background:#334155;
}
</style>
</head>
<body>

<div class="container">

<h1>ğŸ¯ Lotto Generator</h1>

<div class="mode-toggle">
  <span id="labelOne" class="mode-label active">í•˜ë‚˜ì”©</span>

  <label class="switch">
    <input type="checkbox" id="modeSwitch">
    <span class="slider"></span>
  </label>

  <span id="labelAll" class="mode-label">í•œë²ˆì—</span>
</div>

<div class="numbers" id="numbers"></div>

<button id="generateBtn" onclick="generate()">ë²ˆí˜¸ ë½‘ê¸°</button>

<div class="share-row" id="shareRow">
  <button onclick="copyNumbers()">ë³µì‚¬</button>
  <button onclick="shareNumbers()">ê³µìœ </button>
  <button onclick="saveImage()">ì €ì¥</button>
</div>

</div>

<script>
const numbersContainer=document.getElementById("numbers");
const generateBtn=document.getElementById("generateBtn");
const shareRow=document.getElementById("shareRow");
const modeSwitch=document.getElementById("modeSwitch");
const labelOne=document.getElementById("labelOne");
const labelAll=document.getElementById("labelAll");

modeSwitch.addEventListener("change",()=>{
  labelOne.classList.toggle("active",!modeSwitch.checked);
  labelAll.classList.toggle("active",modeSwitch.checked);
});

function getColorClass(num){
  if(num<=10) return "yellow";
  if(num<=20) return "blue";
  if(num<=30) return "red";
  if(num<=40) return "gray";
  return "green";
}

async function generate(){
  generateBtn.disabled=true;
  shareRow.style.display="none";
  numbersContainer.innerHTML="";

  const nums=new Set();
  while(nums.size<6){
    nums.add(Math.floor(Math.random()*45)+1);
  }
  const sorted=[...nums].sort((a,b)=>a-b);

  if(modeSwitch.checked){
    await allMode(sorted);
  }else{
    await oneMode(sorted);
  }

  generateBtn.disabled=false;
  shareRow.style.display="flex";
}

async function oneMode(finalNumbers){
  for(let i=0;i<6;i++){
    const ball=document.createElement("div");
    ball.className="ball";
    numbersContainer.appendChild(ball);

    await new Promise(resolve=>{
      let count=0;
      const interval=setInterval(()=>{
        const temp=Math.floor(Math.random()*45)+1;
        ball.textContent=temp;
        ball.className="ball "+getColorClass(temp);
        count++;
        if(count>20){
          clearInterval(interval);
          ball.textContent=finalNumbers[i];
          ball.className="ball "+getColorClass(finalNumbers[i]);
          resolve();
        }
      },50);
    });
  }
}

function allMode(finalNumbers){
  return new Promise(resolve=>{
    const balls=[];
    for(let i=0;i<6;i++){
      const ball=document.createElement("div");
      ball.className="ball";
      numbersContainer.appendChild(ball);
      balls.push(ball);
    }

    let duration=2000;
    let start=null;

    function animate(timestamp){
      if(!start) start=timestamp;
      const progress=timestamp-start;

      if(progress<duration){
        balls.forEach(ball=>{
          const temp=Math.floor(Math.random()*45)+1;
          ball.textContent=temp;
          ball.className="ball "+getColorClass(temp);
        });
        requestAnimationFrame(animate);
      }else{
        balls.forEach((ball,index)=>{
          ball.textContent=finalNumbers[index];
          ball.className="ball "+getColorClass(finalNumbers[index]);
          ball.style.transform="scale(1.15)";
        });
        setTimeout(()=>{
          balls.forEach(ball=>ball.style.transform="scale(1)");
          resolve();
        },200);
      }
    }

    requestAnimationFrame(animate);
  });
}

function copyNumbers(){
  const nums=[...document.querySelectorAll(".ball")]
  .map(el=>el.textContent).join(", ");
  navigator.clipboard.writeText(nums);
  alert("ë³µì‚¬ ì™„ë£Œ");
}

function shareNumbers(){
  const nums=[...document.querySelectorAll(".ball")]
  .map(el=>el.textContent).join(", ");
  if(navigator.share){
    navigator.share({title:"ë¡œë˜ ë²ˆí˜¸",text:nums});
  }
}

function saveImage(){
  html2canvas(numbersContainer).then(canvas=>{
    const link=document.createElement("a");
    link.download="lotto.png";
    link.href=canvas.toDataURL();
    link.click();
  });
}
</script>

</body>
</html>
