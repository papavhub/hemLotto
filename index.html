<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LOTTO GENERATOR</title>

<style>
body{
  margin:0;
  background:radial-gradient(circle at 20% 20%, #1e293b, #0f172a 60%);
  color:white;
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  text-align:center;
  min-height:100vh;
}

h1{
  margin-top:60px;
  font-weight:600;
  letter-spacing:2px;
}

/* ===== 토글 ===== */
.toggle-wrap{
  margin:40px auto;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:14px;
  font-size:14px;
  opacity:0.85;
}

.switch{
  position:relative;
  width:64px;
  height:30px;
}

.switch input{
  opacity:0;
  width:0;
  height:0;
}

.slider{
  position:absolute;
  inset:0;
  background:#334155;
  border-radius:30px;
  transition:.3s;
}

.slider:before{
  content:"";
  position:absolute;
  height:22px;
  width:22px;
  left:4px;
  bottom:4px;
  background:white;
  border-radius:50%;
  transition:.3s;
}

input:checked + .slider{
  background:#6366f1;
}

input:checked + .slider:before{
  transform:translateX(34px);
}

/* ===== 번호 영역 ===== */
.numbers{
  margin-top:60px;
  display:flex;
  justify-content:center;
  gap:22px;
  flex-wrap:wrap;
}

.ball{
  width:72px;
  height:72px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  font-weight:700;
  color:white;
  opacity:1;
  transform:scale(1);
  transition:transform .2s ease;
}

.ball.final{
  animation:pop .35s ease;
}

@keyframes pop{
  0%{transform:scale(1.2);}
  100%{transform:scale(1);}
}

/* 버튼 */
button{
  margin-top:60px;
  padding:14px 44px;
  border:none;
  border-radius:40px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  background:linear-gradient(45deg,#6366f1,#8b5cf6);
  color:white;
  transition:.3s;
}

button:hover{
  transform:scale(1.05);
}

button:disabled{
  opacity:.4;
  cursor:not-allowed;
}

@media(max-width:480px){
  .ball{
    width:60px;
    height:60px;
    font-size:22px;
  }
}
</style>
</head>
<body>

<h1>LOTTO GENERATOR</h1>

<div class="toggle-wrap">
  <span>하나씩 보기</span>

  <label class="switch">
    <input type="checkbox" id="modeToggle">
    <span class="slider"></span>
  </label>

  <span>한번에 보기</span>
</div>

<div class="numbers" id="numbers"></div>

<button id="generateBtn">번호 생성</button>

<script>
const numbersContainer=document.getElementById("numbers");
const generateBtn=document.getElementById("generateBtn");
const modeToggle=document.getElementById("modeToggle");

function getColor(num){
  if(num<=10) return "#facc15";
  if(num<=20) return "#3b82f6";
  if(num<=30) return "#ef4444";
  if(num<=40) return "#22c55e";
  return "#a855f7";
}

function generateNumbers(){
  const set=new Set();
  while(set.size<6){
    set.add(Math.floor(Math.random()*45)+1);
  }
  return [...set];
}

/* ===== 랜덤 회전 함수 ===== */
function spinBall(ball, finalNumber, duration=1200){
  return new Promise(resolve=>{
    let elapsed=0;
    const interval=60;

    const spin=setInterval(()=>{
      ball.textContent=Math.floor(Math.random()*45)+1;
      elapsed+=interval;

      if(elapsed>=duration){
        clearInterval(spin);
        ball.textContent=finalNumber;
        ball.classList.add("final");
        resolve();
      }
    },interval);
  });
}

/* ===== 하나씩 모드 ===== */
async function sequentialMode(sorted){
  for(let i=0;i<6;i++){
    const ball=document.createElement("div");
    ball.className="ball";
    ball.style.background=getColor(sorted[i]);
    numbersContainer.appendChild(ball);

    await spinBall(ball, sorted[i], 1000);
  }
}

/* ===== 한번에 모드 ===== */
async function allAtOnceMode(sorted){
  const balls=[];

  for(let i=0;i<6;i++){
    const ball=document.createElement("div");
    ball.className="ball";
    ball.style.background=getColor(sorted[i]);
    numbersContainer.appendChild(ball);
    balls.push(ball);
  }

  await Promise.all(
    balls.map((ball,i)=>spinBall(ball, sorted[i], 1200))
  );
}

/* ===== 생성 버튼 ===== */
generateBtn.addEventListener("click", async()=>{
  generateBtn.disabled=true;
  numbersContainer.innerHTML="";

  const numbers=generateNumbers();
  const sorted=[...numbers].sort((a,b)=>a-b);

  if(modeToggle.checked){
    await allAtOnceMode(sorted);
  }else{
    await sequentialMode(sorted);
  }

  generateBtn.disabled=false;
});
</script>

</body>
</html>
